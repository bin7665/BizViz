{% extends 'BizViz/base.html' %} {% load static %}{% block active %}
<li class="nav-item active">
  <a class="nav-link" href="/"
    >검색
    <div class="sr-only">Home</div></a
  >
</li>
<li class="nav-item">
  <a class="nav-link" href="/statistics/">통계 • 분석</a>
</li>
{% endblock %} {% block content %}
<div class="content">
  <div class="main-search-container container">
    <div class="main-title row">
      <div class="col d-flex justify-content-center mt-5 pt-5">
        <h1>관심 있는 지원사업을 검색해보세요.</h1>
      </div>
    </div>
    <div class="main-search-part row text-center my-2">
      <div class="col input-group">
        <input type="text" class="support-search form-control" />
        <div class="input-group-append">
          <div class="search-btn btn">검색 <i class="fas fa-search"></i></div>
        </div>
      </div>
    </div>
    <div class="main-search-filter row d-flex justify-content-center">
      <!-- 이건 나중에 바꿔야겠다. 그냥은 별로 안 예쁨 -->
      <div class="search-reset col-12 col-sm-2">
        검색조건 <i class="fas fa-sync-alt"></i>
      </div>
      <div class="search-filter-region col-12 col-sm-2">
        <div class="search-filter-btn">
          <div class="dropdown">
            <button
              class="btn btn-sm btn-secondary dropdown-toggle"
              type="button"
              id="dropdownMenuButton"
              data-toggle="dropdown"
              aria-expanded="false"
            >
              지역 (17/17)
            </button>
            <!-- checkbox 범위 조정하는 건 나중에 자바스크립트로 button을 만들어주자 -->
            <style>
              .region-filter {
                width: 25rem;
              }
            </style>
            <form class="region-filter dropdown-menu p-2"></form>
          </div>
        </div>
      </div>
      <div class="search-filter-category col-12 col-sm-2">
        <div class="search-filter-btn">
          <div class="dropdown">
            <button
              class="btn btn-sm btn-secondary dropdown-toggle"
              type="button"
              id="dropdownMenuButton"
              data-toggle="dropdown"
              aria-expanded="false"
            >
              분야 (45/45)
            </button>
            <style>
              .category-filter {
                width: 30rem;
              }
            </style>
            <form class="category-filter dropdown-menu p-2"></form>
          </div>
        </div>
      </div>
      <div class="search-filter-business_type col-12 col-sm-2">
        <div class="search-filter-btn">
          <div class="dropdown">
            <button
              class="btn btn-sm btn-secondary dropdown-toggle"
              type="button"
              id="dropdownMenuButton"
              data-toggle="dropdown"
              aria-expanded="false"
            >
              기업형태 (7/7)
            </button>
            <style>
              .business-filter {
                width: 1rem;
              }
            </style>
            <form class="business-filter dropdown-menu p-2"></form>
          </div>
        </div>
      </div>
      <div class="search-filter-department col-12 col-sm-2">
        <div class="search-filter-btn">
          <div class="dropdown">
            <button
              class="btn btn-sm btn-secondary dropdown-toggle"
              type="button"
              id="dropdownMenuButton"
              data-toggle="dropdown"
              aria-expanded="false"
            >
              부처 / 지자체 (39/39)
            </button>
            <style>
              .department-filter {
                width: 45rem;
              }
            </style>
            <form
              class="department-filter dropdown-menu dropdown-menu-right p-2"
            ></form>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="main-graph-container container my-3">
    <div class="row my-5">
      <div class="graph-contents graph-support-top5 col">
        <div class="main-graph-title">
          가장 인기 있는 지원사업 top5
        </div>
        <div class="main-graph-container">
          <img
            src="https://i1.wp.com/hleecaster.com/wp-content/uploads/2019/08/4.png?w=1200"
            alt="bar chart 1"
          />
        </div>
      </div>
      <div class="graph-contents graph-depart-top5 col">
        <div class="main-graph-title">
          공고를 많이 낸 부처/지자체 top5
          <span
            data-toggle="tooltip"
            data-placement="bottom"
            title="부서/지자체 조건은 영향을 미치지 않습니다."
          >
            <i class="fas fa-info-circle"></i>
          </span>
        </div>
        <!-- <div class="graph-depart-warning">
          information icon 클릭 시에 표시 --
          부서/지자체 조건은 영향을 미치지 않습니다.
        </div> -->
        <div class="main-graph-container">
          <img
            src="https://images.ctfassets.net/fevtq3bap7tj/5FSJrJeDIIGAmGCsGcQ8S4/e2fc867a487614b47f72104a36fbcf7f/simple-column.png"
            alt="bar chart 2"
          />
        </div>
      </div>
    </div>
  </div>
  <div class="main-support-container container mb-5">
    <button
      type="button"
      class="btn btn-primary"
      data-toggle="modal"
      data-target=".depart-modal"
    >
      Large modal
    </button>
    <!-- <script>
      const modal = document.querySelector(".modal-body");
      modal.innerHTML = getBody("./statistics/중소벤처기업부/");
    </script> -->
    <div class="supports-list row">
      <!-- css 분리 시키기 -->
      <!-- title이 50자 이상일 때는 뒤에 ... 붙이기 -->
      <!-- card background에 기업마당 로고나 bizbot 로고 넣으면 괜찮을 듯 -->
      {% for support in supports %}
      <div class="col-12 col-sm-6 col-xl-4 my-3">
        <div class="support-card card" style="height: 15.5rem;">
          <div class="card-header">
            <div class="support-depart">
              <h6 class="m-0">
                {{ support.project_depart }}
                <span
                  onclick="modalFunction('{{ support.project_depart }}')"
                  class="depart-btn btn p-0 mb-1"
                  data-toggle="modal"
                  data-target=".depart-modal"
                >
                  <i class="fas fa-search-plus"></i>
                </span>
              </h6>
            </div>
          </div>
          <div class="card-body d-flex flex-column justify-content-between">
            <div class="support-name card-title">
              {% if support.project_name|length > 50 %}
              <h5>{{ support.project_name|truncatechars:53 }}</h5>
              {% else %}
              <h5>{{ support.project_name }}</h5>
              {% endif %}
            </div>
            <div class="support-d-day card-subtitle align-self-end">
              D - 20
            </div>
          </div>
          <div class="card-footer d-flex justify-content-between">
            <div class="support-date">{{ support.period_date }}</div>
            <div class="support-hits">
              views: {{ support.project_hits }}
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</div>

<!-- Modal -->
<div
  class="modal fade depart-modal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="department-description-modal"
  aria-hidden="true"
>
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">중소벤처기업부</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        {{중소벤처기업부}}
      </div>
    </div>
  </div>
</div>

<iframe src="" frameborder="0"></iframe>
<!-- Scripts -->
<script>
  $(function () {
    $('[data-toggle="tooltip"]').tooltip();
  });
  const modalTitle = document.querySelector(".modal-title");
  const modalBody = document.querySelector(".modal-body");
  function modalFunction(depart) {
    const text1 = "{{ ";
    const text2 = depart + " }}";
    modalTitle.innerHTML = depart;
    // modalBody.innerHTML = "{{중소벤처기업부|safe}}";
  }
  // const modal = document.querySelector(".depart-modal");
  // const modalBtn = document.querySelector(".depart-btn");
  // modalBtn.onclick = function () {
  //   modal.style.display = "block";
  //   modal.classList.add("show");
  // };
</script>
{% endblock %} {% block import %}
<script type="text/javascript" src="{% static 'js/datas.js' %}"></script>
<script type="text/javascript" src="{% static 'js/index.js' %}"></script>
{% endblock %}
