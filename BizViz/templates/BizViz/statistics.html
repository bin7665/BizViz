{% extends 'BizViz/base.html' %} {% load static %} {% block css %}
<style type="text/css">
  .not-filtered {
    display: none;
  }
</style>
{% endblock %} {% block active %}
<li class="nav-item">
  <a class="nav-link" href="/">검색<span class="sr-only">Home</span></a>
</li>
<li class="nav-item active">
  <a class="nav-link" href="/statistics/">통계 • 분석</a>
</li>
{% endblock %} {% block content %}
<div class="content">
  <div class="main-statistics-compare">
    <div class="statistics-compare-title m-5 text-center">
      <h2>
        비교할 부서 / 지자체를 선택해주세요.
      </h2>
    </div>
    <div class="statistics-compare-area d-flex justify-content-around mb-5">
      <div class="statistics-container ml-5">
        <div class="select-depart m-2">
          <span class="compare-selected-depart">
            중소벤처기업부 <i class="fas fa-caret-down"></i>
          </span>
          <div class="dropdown">
            <button
              class="btn btn-primary dropdown-toggle"
              type="button"
              data-toggle="dropdown"
            >
              Dropdown Example <span class="caret"></span>
            </button>
            <ul class="dropdown-menu">
              <input
                class="form-control basic-search"
                id="myInput"
                type="text"
                placeholder="Search.."
                autocomplete="off"
                onkeyup="departSearch(this)"
              />
              <li><a class="dropdown-item filtered" href="#">HTML</a></li>
              <li><a class="dropdown-item filtered" href="#">CSS</a></li>
              <li><a class="dropdown-item filtered" href="#">JavaScript</a></li>
              <li><a class="dropdown-item filtered" href="#">jQuery</a></li>
              <li><a class="dropdown-item filtered" href="#">Bootstrap</a></li>
              <li><a class="dropdown-item filtered" href="#">Angular</a></li>
            </ul>
          </div>
        </div>
        <div class="basic-department border border-secondary">
          {{ basic }}
        </div>
      </div>
      <div class="compare-exchange align-self-center">
        <span class="btn">
          <i class="fas fa-exchange-alt fa-3x"></i>
        </span>
      </div>
      <div class="statistics-container mr-5">
        <div class="select-depart m-2">
          <span class="compare-selected-depart">
            산업통상자원부 <i class="fas fa-caret-down"></i>
          </span>
        </div>
        <div class="compare-department border border-secondary">
          {{ compare }}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %} {% block script %}
<script>
  // NodeList에 filter 추가
  NodeList.prototype.filter = Array.prototype.filter;

  function departSearch(input) {
    const filter = input.value.toUpperCase();
    const dropdownMenu = input.parentElement;
    const dropdownList = dropdownMenu.querySelectorAll("li");

    console.log(event);

    if (event.keyCode === 13) {
      console.log("Press Enter key");
    } else if (event.keyCode === 38) {
      console.log("Press Up key");
    } else if (event.keyCode === 40) {
      console.log("Press Down key");
    } else {
      for (let i = 0, length = dropdownList.length; i < length; i++) {
        li = dropdownList[i];
        a = li.querySelector("a");
        txtValue = a.textContent || a.innerText;
        if (txtValue.toUpperCase().indexOf(filter) > -1) {
          li.classList.add("filtered");
          li.classList.remove("not-filtered");
        } else {
          li.classList.remove("filtered");
          li.classList.add("not-filtered");
        }
      }
    }
  }
  // 13 - enter 키, 38 - 위 방향키, 40 - 아래 방향키
  // addEventListener를 통해서 onmouseover, onmouseout, onkeyup envent들을 추가하면 될 듯
</script>
{% endblock %}
